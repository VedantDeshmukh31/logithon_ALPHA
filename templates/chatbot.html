<!DOCTYPE html>
<html>
  <head>
    <title>Chatbot</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
      integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{{ url_for('static', filename='chatbot-style.css')}}"
    />
  </head>
  <body>
    <div class="chat-button">
      <button id="open-chat" class="btn btn-primary">Chat with ChatBot</button>
    </div>

    <div id="chat-window" class="chat-window">
      <div class="chat-window-content">
        <div class="chat-header">
          <h5>Chat with ChatBot</h5>
          <button id="close-chat" class="btn btn-danger">Close</button>
        </div>
        <div id="chat-messages" class="chat-messages"></div>
        <form id="chat-form" class="input-group">
          <input
            type="text"
            id="chat-input"
            name="msg"
            placeholder="Type your message..."
            autocomplete="off"
            class="form-control type_msg"
            required
          />
          <div class="input-group-append">
            <button
              type="submit"
              id="chat-send"
              class="input-group-text send_btn"
            >
              <i class="fas fa-location-arrow"></i>
            </button>
          </div>
        </form>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            // ChatBot dialog
            $("#open-chat").click(function () {
                $("#chat-window").fadeIn();
            });
    
            $("#close-chat").click(function () {
                $("#chat-window").fadeOut();
            });
    
            // ChatBot functionality
            $("#messageArea").on("submit", function (event) {
                event.preventDefault();
                var rawText = $("#text").val();
                var userHtml =
                    '<div class="d-flex justify-content-end mb-4"><div class="msg_cotainer_send">' +
                    rawText +
                    "</div></div>";
                $("#messageFormeight").append(userHtml);
    
                // Generate responses based on user input
                var botHtml = "";
                if (rawText.toLowerCase() === "hi") {
                    botHtml =
                        '<div class="d-flex justify-content-start mb-4"><div class="msg_cotainer">Hello!</div></div>';
                } else if (rawText.toLowerCase() === "bye") {
                    botHtml =
                        '<div class="d-flex justify-content-start mb-4"><div class="msg_cotainer">Goodbye!</div></div>';
                } else if (rawText.toLowerCase() === "track order 1") {
                    botHtml =
                        '<div class="d-flex justify-content-start mb-4"><div class="msg_cotainer"><a href="http://127.0.0.1:5500/Flight_Route/static/flight_route_map.html">Tracking link for Order 1</a></div></div>';
                } else if (rawText.toLowerCase() === "track order 2") {
                    botHtml =
                        '<div class="d-flex justify-content-start mb-4"><div class="msg_cotainer"><a href="http://127.0.0.1:5500/Sea_Route/static/map_with_route.html">Tracking link for Order 2</a></div></div>';
                } else {
                    botHtml =
                        '<div class="d-flex justify-content-start mb-4"><div class="msg_cotainer">I did not understand that.</div></div>';
                }
                $("#messageFormeight").append($.parseHTML(botHtml));
                $("#text").val("");
            });
    
            $("#chat-form").on("submit", function (event) {
                event.preventDefault();
                var rawText = $("#chat-input").val();
                var userHtml =
                    '<div class="d-flex justify-content-end mb-4"><div class="msg_cotainer_send">' +
                    rawText +
                    "</div></div>";
                $("#chat-messages").append(userHtml);
    
                // Generate responses based on user input
                var botHtml = "";
                if (rawText.toLowerCase() === "hi") {
                    botHtml =
                        '<div class="d-flex justify-content-start mb-4"><div class="msg_cotainer">Hello!</div></div>';
                } else if (rawText.toLowerCase() === "bye") {
                    botHtml =
                        '<div class="d-flex justify-content-start mb-4"><div class="msg_cotainer">Goodbye!</div></div>';
                } else if (rawText.toLowerCase() === "track order 1") {
                    botHtml =
                        '<div class="d-flex justify-content-start mb-4"><div class="msg_cotainer"><a href="http://127.0.0.1:5500/Flight_Route/static/flight_route_map.html">Tracking link for Order 1</a></div></div>';
                } else if (rawText.toLowerCase() === "track order 2") {
                    botHtml =
                        '<div class="d-flex justify-content-start mb-4"><div class="msg_cotainer"><a href="http://127.0.0.1:5500/Sea_Route/static/map_with_route.html">Tracking link for Order 2</a></div></div>';
                } else {
                    botHtml =
                        '<div class="d-flex justify-content-start mb-4"><div class="msg_cotainer">I did not understand that.</div></div>';
                }
                $("#chat-messages").append($.parseHTML(botHtml));
                $("#chat-input").val("");
            });
        });
    </script>
    
  </body>
</html>
